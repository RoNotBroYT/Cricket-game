<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cricket Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #000 60%, #00eaff 100%);
      font-family: Segoe UI, Arial, sans-serif;
      color: #00eaff;
    }
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 32px;
      min-height: 100vh;
    }
    h2 {
      color: #00eaff;
      margin-bottom: 8px;
      letter-spacing: 2px;
    }
    .info {
      margin-bottom: 12px;
      color: #fff;
      font-size: 1.1rem;
      font-weight: bold;
    }
    .game-btn {
      background: #111;
      color: #00eaff;
      border: 2px solid #00eaff;
      padding: 6px 18px;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: bold;
      margin: 10px 0 20px 0;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      box-shadow: 0 0 16px 0 #00eaff22;
    }
    .game-btn:hover, .game-btn:focus {
      background: #00eaff;
      color: #111;
    }
    canvas {
      background: #10151b;
      border-radius: 16px;
      box-shadow: 0 6px 32px 0 #00eaff55;
      display: block;
      margin-bottom: 14px;
      border: 2px solid #00eaff55;
      outline: none;
    }
    .game-over {
      color: #ff3860;
      font-weight: bold;
      margin-left: 8px;
    }
    @media (max-width: 520px) {
      canvas {
        width: 98vw !important;
        height: auto !important;
      }
      h2 {
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üèè Cricket Game</h2>
    <div class="info" id="scoreInfo">Score: 0</div>
    <button class="game-btn" id="restart">Restart</button>
    <canvas id="game" width="440" height="720" tabindex="1"></canvas>
    <div style="color:#aaa;font-size:14px;text-align:center">
      Click or press <b>Space</b> to swing. Try to get your highscore!<br>
      You have 1 wicket. How high can you score?
    </div>
  </div>
  <script>
   
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const scoreInfo = document.getElementById("scoreInfo");
    const restartBtn = document.getElementById("restart");

    let score = 0;
    let wickets = 1;
    let gameOver = false;
    let batAngle = 0;
    let swinging = false;
    let ball, ballSpeed, ballHit, swingPower;

    const pitchMargin = 40;
    const pitchWidth = canvas.width - 2 * pitchMargin;
    const pitchHeight = canvas.height - 2 * pitchMargin;
    const pitchX = pitchMargin;
    const pitchY = pitchMargin;

    
    const batW = 8;
    const batH = 36; 
    const batX = pitchX + pitchWidth - 32;
    const batY = pitchY + pitchHeight / 2;

    
    const stumpYTop = batY - 20;
    const stumpYBot = batY + 20;
    const stumpX = pitchX + pitchWidth - 18;
    const stumpGap = 4;

    function randomBallSpeed() {
      return 6; 
    }

    function resetBall() {
     
      ball = {
        x: pitchX + 22,
        y: pitchY + pitchHeight / 2,
        r: 10,
        vx: randomBallSpeed(),
        vy: 0, 
        hit: false,
        runValue: Math.random() < 0.15 ? 4 : 1
      };
      ballSpeed = Math.sqrt(ball.vx * ball.vx + ball.vy * ball.vy);
      ballHit = false;
      swingPower = 1;
    }

    function resetGame() {
      score = 0;
      wickets = 1;
      gameOver = false;
      batAngle = 0;
      swinging = false;
      resetBall();
      scoreInfo.innerHTML = `Score: 0 | Wicket: 1`;
      requestAnimationFrame(draw);
    }

    function drawPitch() {
     
      ctx.save();
      ctx.fillStyle = "#012c34";
      ctx.fillRect(pitchX, pitchY, pitchWidth, pitchHeight);
      
      ctx.strokeStyle = "#00eaff";
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(pitchX + pitchWidth - 26, pitchY + 24);
      ctx.lineTo(pitchX + pitchWidth - 26, pitchY + pitchHeight - 24);
      ctx.stroke();
      
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(pitchX + 30, pitchY + 24);
      ctx.lineTo(pitchX + 30, pitchY + pitchHeight - 24);
      ctx.stroke();
      
      ctx.strokeStyle = "#00eaff55";
      ctx.lineWidth = 1.5;
      ctx.strokeRect(pitchX, pitchY, pitchWidth, pitchHeight);
      ctx.restore();
    }

    function drawStumps() {
      ctx.save();
     
      ctx.strokeStyle = "#fff";
      ctx.lineWidth = 5;
      for (let i = -1; i <= 1; i++) {
        ctx.beginPath();
        ctx.moveTo(stumpX + i * stumpGap, stumpYTop);
        ctx.lineTo(stumpX + i * stumpGap, stumpYBot);
        ctx.stroke();
      }
     
      ctx.strokeStyle = "#ffe100";
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(stumpX - stumpGap, stumpYTop);
      ctx.lineTo(stumpX, stumpYTop - 4);
      ctx.lineTo(stumpX + stumpGap, stumpYTop);
      ctx.stroke();
      ctx.restore();
    }

    function drawBall() {
      ctx.save();
      ctx.shadowColor = "#ffe100";
      ctx.shadowBlur = 8;
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.r, 0, 2 * Math.PI);
      ctx.fillStyle = "#ffe100";
      ctx.fill();
      ctx.shadowBlur = 0;
      ctx.restore();
    }

    function drawBat() {
      ctx.save();
      ctx.translate(batX, batY);
      ctx.rotate(batAngle);
      ctx.fillStyle = "#00eaff";
      ctx.shadowColor = "#00eaff";
      ctx.shadowBlur = 8;
      ctx.fillRect(-batW/2, -batH/2, batW, batH);
      ctx.shadowBlur = 0;
      ctx.restore();
    }

    function drawScore() {
      scoreInfo.innerHTML = `Score: ${score} | Wicket: ${wickets}${gameOver ? '<span class="game-over"> Game Over!</span>' : ''}`;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPitch();
      drawStumps();
      drawBall();
      drawBat();
      drawScore();

      if (!gameOver) {
        update();
        requestAnimationFrame(draw);
      }
    }

    
    function swingBat() {
      if (gameOver || swinging) return;
      swinging = true;
      let swingFrames = 0;
    
      function animateSwing() {
        swingFrames++;
        batAngle = -Math.PI/5 * Math.sin(Math.PI * swingFrames / 8);
        if (swingFrames < 8) {
          requestAnimationFrame(animateSwing);
        } else {
          batAngle = 0;
          swinging = false;
        }
      }
      animateSwing();

      
      if (!ball.hit && Math.abs(ball.x - batX) < 19 && Math.abs(ball.y - batY) < 32) {
        
        ball.hit = true;
        score += ball.runValue;
        swingPower = 1 + Math.random();
        
        ball.vx = Math.random() * -3 - 7;
        ball.vy = (Math.random() - 0.5) * 10;
        setTimeout(resetBall, 700);
      }
    }

    function update() {
      
      if (!ball.hit) {
        ball.x += ball.vx;
        ball.y += ball.vy;

        
        if (
          ball.x + ball.r > stumpX - stumpGap * 1.5 &&
          ball.x - ball.r < stumpX + stumpGap * 1.5 &&
          ball.y + ball.r > stumpYTop &&
          ball.y - ball.r < stumpYBot
        ) {
          
          wickets = 0;
          gameOver = true;
          setTimeout(draw, 30); 
          ball.hit = true;
        }

        
        if (ball.x >= batX + 18 && !ball.hit && !gameOver) {
        
          setTimeout(resetBall, 700);
          ball.hit = true;
        }
      } else {
        
        ball.x += ball.vx;
        ball.y += ball.vy;
      }
    }

    
    canvas.addEventListener("click", swingBat);
    window.addEventListener("keydown", e => {
      if (e.code === "Space") swingBat();
      if (e.key === "r") resetGame();
    });
    restartBtn.onclick = resetGame;

   
    function resize() {
      let w = Math.min(440, window.innerWidth * 0.98);
      canvas.style.width = w + "px";
      canvas.style.height = (w * 1.64) + "px";
    }
    window.addEventListener("resize", resize);
    resize();

    
    if (!CanvasRenderingContext2D.prototype.roundRect) {
      CanvasRenderingContext2D.prototype.roundRect = function(x, y, w, h, r) {
        this.beginPath();
        this.moveTo(x + r, y);
        this.arcTo(x + w, y, x + w, y + h, r);
        this.arcTo(x + w, y + h, x, y + h, r);
        this.arcTo(x, y + h, x, y, r);
        this.arcTo(x, y, x + w, y, r);
        this.closePath();
      };
    }

    
    resetGame();
  </script>
</body>
</html>
